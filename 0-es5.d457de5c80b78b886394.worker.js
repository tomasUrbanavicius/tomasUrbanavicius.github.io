function _slicedToArray(t,e){return _arrayWithHoles(t)||_iterableToArrayLimit(t,e)||_unsupportedIterableToArray(t,e)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArrayLimit(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var r=[],s=!0,i=!1,n=void 0;try{for(var o,a=t[Symbol.iterator]();!(s=(o=a.next()).done)&&(r.push(o.value),!e||r.length!==e);s=!0);}catch(u){i=!0,n=u}finally{try{s||null==a.return||a.return()}finally{if(i)throw n}}return r}}function _arrayWithHoles(t){if(Array.isArray(t))return t}function _createForOfIteratorHelper(t,e){var r;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(r=_unsupportedIterableToArray(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var s=0,i=function(){};return{s:i,n:function(){return s>=t.length?{done:!0}:{done:!1,value:t[s++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,o=!0,a=!1;return{s:function(){r=t[Symbol.iterator]()},n:function(){var t=r.next();return o=t.done,t},e:function(t){a=!0,n=t},f:function(){try{o||null==r.return||r.return()}finally{if(a)throw n}}}}function _unsupportedIterableToArray(t,e){if(t){if("string"==typeof t)return _arrayLikeToArray(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(t,e):void 0}}function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,s=new Array(e);r<e;r++)s[r]=t[r];return s}function _get(t,e,r){return(_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,r){var s=_superPropBase(t,e);if(s){var i=Object.getOwnPropertyDescriptor(s,e);return i.get?i.get.call(r):i.value}})(t,e,r||t)}function _superPropBase(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=_getPrototypeOf(t)););return t}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_setPrototypeOf(t,e)}function _setPrototypeOf(t,e){return(_setPrototypeOf=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function _createSuper(t){var e=_isNativeReflectConstruct();return function(){var r,s=_getPrototypeOf(t);if(e){var i=_getPrototypeOf(this).constructor;r=Reflect.construct(s,arguments,i)}else r=s.apply(this,arguments);return _possibleConstructorReturn(this,r)}}function _possibleConstructorReturn(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?_assertThisInitialized(t):e}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var r=0;r<e.length;r++){var s=e[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}function _createClass(t,e,r){return e&&_defineProperties(t.prototype,e),r&&_defineProperties(t,r),t}!function(t){var e={};function r(s){if(e[s])return e[s].exports;var i=e[s]={i:s,l:!1,exports:{}};return t[s].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=t,r.c=e,r.d=function(t,e,s){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(r.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(s,i,(function(e){return t[e]}).bind(null,i));return s},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s="WZ91")}({WZ91:function(t,e,r){"use strict";function s(t,e,r,s){return new(r||(r=Promise))((function(i,n){function o(t){try{u(s.next(t))}catch(e){n(e)}}function a(t){try{u(s.throw(t))}catch(e){n(e)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(o,a)}u((s=s.apply(t,e||[])).next())}))}function i(t){return"function"==typeof t}r.r(e),r.d(e,"WorkerMessage",(function(){return N}));var n=!1,o={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){if(t){var e=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+e.stack)}else n&&console.log("RxJS: Back to a better error behavior. Thank you. <3");n=t},get useDeprecatedSynchronousErrorHandling(){return n}};function a(t){setTimeout((function(){throw t}),0)}var u,c={closed:!0,next:function(t){},error:function(t){if(o.useDeprecatedSynchronousErrorHandling)throw t;a(t)},complete:function(){}},h=Array.isArray||function(t){return t&&"number"==typeof t.length},l=function(){function t(t){return Error.call(this),this.message=t?"".concat(t.length," errors occurred during unsubscription:\n").concat(t.map((function(t,e){return"".concat(e+1,") ").concat(t.toString())})).join("\n  ")):"",this.name="UnsubscriptionError",this.errors=t,this}return t.prototype=Object.create(Error.prototype),t}(),b=((u=function(){function t(e){_classCallCheck(this,t),this.closed=!1,this._parentOrParents=null,this._subscriptions=null,e&&(this._unsubscribe=e)}return _createClass(t,[{key:"unsubscribe",value:function(){var e;if(!this.closed){var r,s=this._parentOrParents,n=this._unsubscribe,o=this._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,s instanceof t)s.remove(this);else if(null!==s)for(var a=0;a<s.length;++a)s[a].remove(this);if(i(n))try{n.call(this)}catch(p){e=p instanceof l?f(p.errors):[p]}if(h(o))for(var u=-1,c=o.length;++u<c;){var b=o[u];if(null!==(r=b)&&"object"==typeof r)try{b.unsubscribe()}catch(p){e=e||[],p instanceof l?e=e.concat(f(p.errors)):e.push(p)}}if(e)throw new l(e)}}},{key:"add",value:function(e){var r=e;if(!e)return t.EMPTY;switch(typeof e){case"function":r=new t(e);case"object":if(r===this||r.closed||"function"!=typeof r.unsubscribe)return r;if(this.closed)return r.unsubscribe(),r;if(!(r instanceof t)){var s=r;(r=new t)._subscriptions=[s]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}var i=r._parentOrParents;if(null===i)r._parentOrParents=this;else if(i instanceof t){if(i===this)return r;r._parentOrParents=[i,this]}else{if(-1!==i.indexOf(this))return r;i.push(this)}var n=this._subscriptions;return null===n?this._subscriptions=[r]:n.push(r),r}},{key:"remove",value:function(t){var e=this._subscriptions;if(e){var r=e.indexOf(t);-1!==r&&e.splice(r,1)}}}]),t}()).EMPTY=function(t){return t.closed=!0,t}(new u),u);function f(t){return t.reduce((function(t,e){return t.concat(e instanceof l?e.errors:e)}),[])}var p="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random(),m=function(t){_inherits(r,t);var e=_createSuper(r);function r(t,s,i){var n;switch(_classCallCheck(this,r),(n=e.call(this)).syncErrorValue=null,n.syncErrorThrown=!1,n.syncErrorThrowable=!1,n.isStopped=!1,arguments.length){case 0:n.destination=c;break;case 1:if(!t){n.destination=c;break}if("object"==typeof t){t instanceof r?(n.syncErrorThrowable=t.syncErrorThrowable,n.destination=t,t.add(_assertThisInitialized(n))):(n.syncErrorThrowable=!0,n.destination=new y(_assertThisInitialized(n),t));break}default:n.syncErrorThrowable=!0,n.destination=new y(_assertThisInitialized(n),t,s,i)}return n}return _createClass(r,[{key:p,value:function(){return this}},{key:"next",value:function(t){this.isStopped||this._next(t)}},{key:"error",value:function(t){this.isStopped||(this.isStopped=!0,this._error(t))}},{key:"complete",value:function(){this.isStopped||(this.isStopped=!0,this._complete())}},{key:"unsubscribe",value:function(){this.closed||(this.isStopped=!0,_get(_getPrototypeOf(r.prototype),"unsubscribe",this).call(this))}},{key:"_next",value:function(t){this.destination.next(t)}},{key:"_error",value:function(t){this.destination.error(t),this.unsubscribe()}},{key:"_complete",value:function(){this.destination.complete(),this.unsubscribe()}},{key:"_unsubscribeAndRecycle",value:function(){var t=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=t,this}}],[{key:"create",value:function(t,e,s){var i=new r(t,e,s);return i.syncErrorThrowable=!1,i}}]),r}(b),y=function(t){_inherits(r,t);var e=_createSuper(r);function r(t,s,n,o){var a,u;_classCallCheck(this,r),(a=e.call(this))._parentSubscriber=t;var h=_assertThisInitialized(a);return i(s)?u=s:s&&(u=s.next,n=s.error,o=s.complete,s!==c&&(i((h=Object.create(s)).unsubscribe)&&a.add(h.unsubscribe.bind(h)),h.unsubscribe=a.unsubscribe.bind(_assertThisInitialized(a)))),a._context=h,a._next=u,a._error=n,a._complete=o,a}return _createClass(r,[{key:"next",value:function(t){if(!this.isStopped&&this._next){var e=this._parentSubscriber;o.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}}},{key:"error",value:function(t){if(!this.isStopped){var e=this._parentSubscriber,r=o.useDeprecatedSynchronousErrorHandling;if(this._error)r&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)r?(e.syncErrorValue=t,e.syncErrorThrown=!0):a(t),this.unsubscribe();else{if(this.unsubscribe(),r)throw t;a(t)}}}},{key:"complete",value:function(){var t=this;if(!this.isStopped){var e=this._parentSubscriber;if(this._complete){var r=function(){return t._complete.call(t._context)};o.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?(this.__tryOrSetError(e,r),this.unsubscribe()):(this.__tryOrUnsub(r),this.unsubscribe())}else this.unsubscribe()}}},{key:"__tryOrUnsub",value:function(t,e){try{t.call(this._context,e)}catch(r){if(this.unsubscribe(),o.useDeprecatedSynchronousErrorHandling)throw r;a(r)}}},{key:"__tryOrSetError",value:function(t,e,r){if(!o.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,r)}catch(s){return o.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=s,t.syncErrorThrown=!0,!0):(a(s),!0)}return!1}},{key:"_unsubscribe",value:function(){var t=this._parentSubscriber;this._context=null,this._parentSubscriber=null,t.unsubscribe()}}]),r}(m),v="function"==typeof Symbol&&Symbol.observable||"@@observable";function d(t){return t}var _,g=((_=function(){function t(e){_classCallCheck(this,t),this._isScalar=!1,e&&(this._subscribe=e)}return _createClass(t,[{key:"lift",value:function(e){var r=new t;return r.source=this,r.operator=e,r}},{key:"subscribe",value:function(t,e,r){var s=this.operator,i=function(t,e,r){if(t){if(t instanceof m)return t;if(t[p])return t[p]()}return t||e||r?new m(t,e,r):new m(c)}(t,e,r);if(i.add(s?s.call(i,this.source):this.source||o.useDeprecatedSynchronousErrorHandling&&!i.syncErrorThrowable?this._subscribe(i):this._trySubscribe(i)),o.useDeprecatedSynchronousErrorHandling&&i.syncErrorThrowable&&(i.syncErrorThrowable=!1,i.syncErrorThrown))throw i.syncErrorValue;return i}},{key:"_trySubscribe",value:function(t){try{return this._subscribe(t)}catch(e){o.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),function(t){for(;t;){var e=t,r=e.closed,s=e.destination,i=e.isStopped;if(r||i)return!1;t=s&&s instanceof m?s:null}return!0}(t)?t.error(e):console.warn(e)}}},{key:"forEach",value:function(t,e){var r=this;return new(e=w(e))((function(e,s){var i;i=r.subscribe((function(e){try{t(e)}catch(r){s(r),i&&i.unsubscribe()}}),s,e)}))}},{key:"_subscribe",value:function(t){var e=this.source;return e&&e.subscribe(t)}},{key:v,value:function(){return this}},{key:"pipe",value:function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return 0===e.length?this:(0===(s=e).length?d:1===s.length?s[0]:function(t){return s.reduce((function(t,e){return e(t)}),t)})(this);var s}},{key:"toPromise",value:function(t){var e=this;return new(t=w(t))((function(t,r){var s;e.subscribe((function(t){return s=t}),(function(t){return r(t)}),(function(){return t(s)}))}))}}]),t}()).create=function(t){return new _(t)},_);function w(t){if(t||(t=o.Promise||Promise),!t)throw new Error("no Promise impl found");return t}var k,S=function(){function t(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return t.prototype=Object.create(Error.prototype),t}(),E=function(t){_inherits(r,t);var e=_createSuper(r);function r(t,s){var i;return _classCallCheck(this,r),(i=e.call(this)).subject=t,i.subscriber=s,i.closed=!1,i}return _createClass(r,[{key:"unsubscribe",value:function(){if(!this.closed){this.closed=!0;var t=this.subject,e=t.observers;if(this.subject=null,e&&0!==e.length&&!t.isStopped&&!t.closed){var r=e.indexOf(this.subscriber);-1!==r&&e.splice(r,1)}}}}]),r}(b),x=function(t){_inherits(r,t);var e=_createSuper(r);function r(t){var s;return _classCallCheck(this,r),(s=e.call(this,t)).destination=t,s}return r}(m),P=((k=function(t){_inherits(r,t);var e=_createSuper(r);function r(){var t;return _classCallCheck(this,r),(t=e.call(this)).observers=[],t.closed=!1,t.isStopped=!1,t.hasError=!1,t.thrownError=null,t}return _createClass(r,[{key:p,value:function(){return new x(this)}},{key:"lift",value:function(t){var e=new O(this,this);return e.operator=t,e}},{key:"next",value:function(t){if(this.closed)throw new S;if(!this.isStopped)for(var e=this.observers,r=e.length,s=e.slice(),i=0;i<r;i++)s[i].next(t)}},{key:"error",value:function(t){if(this.closed)throw new S;this.hasError=!0,this.thrownError=t,this.isStopped=!0;for(var e=this.observers,r=e.length,s=e.slice(),i=0;i<r;i++)s[i].error(t);this.observers.length=0}},{key:"complete",value:function(){if(this.closed)throw new S;this.isStopped=!0;for(var t=this.observers,e=t.length,r=t.slice(),s=0;s<e;s++)r[s].complete();this.observers.length=0}},{key:"unsubscribe",value:function(){this.isStopped=!0,this.closed=!0,this.observers=null}},{key:"_trySubscribe",value:function(t){if(this.closed)throw new S;return _get(_getPrototypeOf(r.prototype),"_trySubscribe",this).call(this,t)}},{key:"_subscribe",value:function(t){if(this.closed)throw new S;return this.hasError?(t.error(this.thrownError),b.EMPTY):this.isStopped?(t.complete(),b.EMPTY):(this.observers.push(t),new E(this,t))}},{key:"asObservable",value:function(){var t=new g;return t.source=this,t}}]),r}(g)).create=function(t,e){return new O(t,e)},k),O=function(t){_inherits(r,t);var e=_createSuper(r);function r(t,s){var i;return _classCallCheck(this,r),(i=e.call(this)).destination=t,i.source=s,i}return _createClass(r,[{key:"next",value:function(t){var e=this.destination;e&&e.next&&e.next(t)}},{key:"error",value:function(t){var e=this.destination;e&&e.error&&this.destination.error(t)}},{key:"complete",value:function(){var t=this.destination;t&&t.complete&&this.destination.complete()}},{key:"_subscribe",value:function(t){return this.source?this.source.subscribe(t):b.EMPTY}}]),r}(P),j=function(t){_inherits(r,t);var e=_createSuper(r);function r(t){var s;return _classCallCheck(this,r),(s=e.call(this))._value=t,s}return _createClass(r,[{key:"_subscribe",value:function(t){var e=_get(_getPrototypeOf(r.prototype),"_subscribe",this).call(this,t);return e&&!e.closed&&t.next(this._value),e}},{key:"getValue",value:function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new S;return this._value}},{key:"next",value:function(t){_get(_getPrototypeOf(r.prototype),"next",this).call(this,this._value=t)}},{key:"value",get:function(){return this.getValue()}}]),r}(P),T=function(){function t(){_classCallCheck(this,t),this._progress=0,this.name="Levy distribution density",this.miu=0,this.sigma=0,this.c=0,this.a=0,this.best={miu:-1,sigma:-1,c:-1,a:-1,estimate:Number.MAX_VALUE,text:""},this._progressSubject=new j(0),this.progress=this._progressSubject.asObservable()}return _createClass(t,[{key:"findBestApprox",value:function(t){return s(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(this.bruteForceBigSteps(t),this.bruteForceSmallSteps(t),this.getBestPoints()));case 1:case"end":return e.stop()}}),e,this)})))}},{key:"bruteForceBigSteps",value:function(t){for(this._progressSubject.next(this._progress=0),this.miu=0;this.miu<=100;this.miu+=1){for(this.sigma=0;this.sigma<=100;this.sigma+=1)for(this.c=0;this.c<=1e5;this.c+=100)for(this.a=0;this.a<=100;this.a+=10){var e=this.countEstimate(t);this.best.estimate>e&&this.registerNewBestEstimate(e),this._progress++}this._progressSubject.next(this._progress/1134965)}}},{key:"bruteForceSmallSteps",value:function(t){var e=this.best.sigma-1<0?0:this.best.sigma-1,r=this.best.c-100<0?0:this.best.c-100,s=this.best.a-10<0?0:this.best.a-10,i=this.best.miu+1>100?100:this.best.miu+1,n=this.best.sigma+1>100?100:this.best.sigma+1,o=this.best.c+100>1e5?1e5:this.best.c+100,a=this.best.a+10>100?100:this.best.a+10;for(this.miu=this.best.miu-1<0?0:this.best.miu-1;this.miu<=i;this.miu+=.1){for(this.miu=Math.round(10*this.miu)/10,this.sigma=e;this.sigma<=n;this.sigma+=.1)for(this.sigma=Math.round(10*this.sigma)/10,this.c=r;this.c<=o;this.c+=1)for(this.a=s;this.a<=a;this.a+=1){var u=this.countEstimate(t);this.best.estimate>u&&this.registerNewBestEstimate(u),this._progress++}this._progressSubject.next(this._progress/1134965)}this._progressSubject.next(100)}},{key:"countEstimate",value:function(t){for(var e=0,r=0;r<t.length;r++){var s=this.getPoint(r);isNaN(s)&&(s=0),e+=Math.abs(Number.parseFloat(t[r])-s)}return e}},{key:"registerNewBestEstimate",value:function(t){this.best={estimate:t,miu:this.miu,sigma:this.sigma,c:this.c,a:this.a,text:"\u03bc: ".concat(this.miu,", \u03c3: ").concat(this.sigma,", c: ").concat(this.c,", a: ").concat(this.a)},this._progressSubject.next(this._progress/1134965)}},{key:"getBestPoints",value:function(){this.miu=this.best.miu,this.sigma=this.best.sigma,this.c=this.best.c,this.a=this.best.a;for(var t=[],e=0;e<365;e++){var r=this.getPoint(e);isNaN(r)&&(r=0),t.push({y:r})}return t}},{key:"getPoint",value:function(t){var e=this.c*Math.sqrt(this.sigma/(2*Math.PI));return 0===e?this.a:0===(e*=Math.pow(Math.E,-this.sigma/(2*(t-this.miu))))?this.a:(e/=Math.pow(Math.abs(t-this.miu),1.5),e+=this.a,isNaN(e)&&console.log("NaN: x: ".concat(t,", \u03bc: ").concat(this.miu,", \u03c3: ").concat(this.sigma,", c: ").concat(this.c,", a: ").concat(this.a)),e)}}]),t}(),C=function(){function t(){_classCallCheck(this,t),this._progress=0,this.name="Log-normal distribution density",this.miu=0,this.sigma=0,this.c=0,this.a=0,this.best={miu:-1,sigma:-1,c:-1,a:-1,estimate:Number.MAX_VALUE,text:""},this._progressSubject=new j(0),this.progress=this._progressSubject.asObservable()}return _createClass(t,[{key:"findBestApprox",value:function(t){return s(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(this.bruteForceBigSteps(t),this.bruteForceSmallSteps(t),this.getBestPoints()));case 1:case"end":return e.stop()}}),e,this)})))}},{key:"bruteForceBigSteps",value:function(t){for(this._progressSubject.next(this._progress=0),this.miu=0;this.miu<=100;this.miu+=1){for(this.sigma=.1;this.sigma<=100;this.sigma+=1)for(this.c=0;this.c<=1e5;this.c+=100)for(this.a=0;this.a<=100;this.a+=10){var e=this.countEstimate(t);this.best.estimate>e&&this.registerNewBestEstimate(e),this._progress++}this._progressSubject.next(this._progress/1134965)}}},{key:"bruteForceSmallSteps",value:function(t){var e=this.best.sigma-1<.1?.1:this.best.sigma-1,r=this.best.c-100<0?0:this.best.c-100,s=this.best.a-10<0?0:this.best.a-10,i=this.best.miu+1>100?100:this.best.miu+1,n=this.best.sigma+1>100?100:this.best.sigma+1,o=this.best.c+100>1e5?1e5:this.best.c+100,a=this.best.a+10>100?100:this.best.a+10;for(this.miu=this.best.miu-1<0?0:this.best.miu-1;this.miu<=i;this.miu+=.1){for(this.miu=Math.round(10*this.miu)/10,this.sigma=e;this.sigma<=n;this.sigma+=.1)for(this.sigma=Math.round(10*this.sigma)/10,this.c=r;this.c<=o;this.c+=1)for(this.a=s;this.a<=a;this.a+=1){var u=this.countEstimate(t);this.best.estimate>u&&this.registerNewBestEstimate(u),this._progress++}this._progressSubject.next(this._progress/1134965)}this._progressSubject.next(100)}},{key:"countEstimate",value:function(t){for(var e=0,r=0;r<t.length;r++){var s=this.getPoint(r);isNaN(s)&&(s=0),e+=Math.abs(Number.parseFloat(t[r])-s)}return e}},{key:"registerNewBestEstimate",value:function(t){this.best={estimate:t,miu:this.miu,sigma:this.sigma,c:this.c,a:this.a,text:"\u03bc: ".concat(this.miu,", \u03c3: ").concat(this.sigma,", c: ").concat(this.c,", a: ").concat(this.a)},this._progressSubject.next(this._progress/1134965)}},{key:"getBestPoints",value:function(){this.miu=this.best.miu,this.sigma=this.best.sigma,this.c=this.best.c,this.a=this.best.a;for(var t=[],e=0;e<365;e++){var r=this.getPoint(e);isNaN(r)&&(r=0),t.push({y:r})}return t}},{key:"getPoint",value:function(t){if(0===t)return this.a;var e=this.c/(t*this.sigma*Math.sqrt(2*Math.PI));return 0===e?this.a:(e*=Math.pow(Math.E,-Math.pow(Math.log(t)-this.miu,2)/2*Math.pow(this.sigma,2)),e+=this.a,isNaN(e)&&console.log("NaN: x: ".concat(t,", \u03bc: ").concat(this.miu,", \u03c3: ").concat(this.sigma,", c: ").concat(this.c,", a: ").concat(this.a)),e)}}]),t}(),M=function(){function t(){_classCallCheck(this,t),this._progress=0,this.name="Weibul distribution density",this.lambda=0,this.k=0,this.c=0,this.a=0,this.best={lambda:-1,k:-1,c:-1,a:-1,estimate:Number.MAX_VALUE,text:""},this._progressSubject=new j(0),this.progress=this._progressSubject.asObservable()}return _createClass(t,[{key:"findBestApprox",value:function(t){return s(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(this.bruteForceBigSteps(t),this.bruteForceSmallSteps(t),this.getBestPoints()));case 1:case"end":return e.stop()}}),e,this)})))}},{key:"bruteForceBigSteps",value:function(t){for(this._progressSubject.next(this._progress=0),this.lambda=.1;this.lambda<=100;this.lambda+=1){for(this.k=0;this.k<=100;this.k+=1)for(this.c=0;this.c<=1e5;this.c+=100)for(this.a=0;this.a<=100;this.a+=10){var e=this.countEstimate(t);this.best.estimate>e&&this.registerNewBestEstimate(e),this._progress++}this._progressSubject.next(this._progress/1134965)}}},{key:"bruteForceSmallSteps",value:function(t){var e=this.best.k-1<0?0:this.best.k-1,r=this.best.c-100<0?0:this.best.c-100,s=this.best.a-10<0?0:this.best.a-10,i=this.best.lambda+1>100?100:this.best.lambda+1,n=this.best.k+1>100?100:this.best.k+1,o=this.best.c+100>1e5?1e5:this.best.c+100,a=this.best.a+10>100?100:this.best.a+10;for(this.lambda=this.best.lambda-1<.1?.1:this.best.lambda-1;this.lambda<=i;this.lambda+=.1){for(this.lambda=Math.round(10*this.lambda)/10,this.k=e;this.k<=n;this.k+=.1)for(this.k=Math.round(10*this.k)/10,this.c=r;this.c<=o;this.c+=1)for(this.a=s;this.a<=a;this.a+=1){var u=this.countEstimate(t);this.best.estimate>u&&this.registerNewBestEstimate(u),this._progress++}this._progressSubject.next(this._progress/1134965)}this._progressSubject.next(100)}},{key:"countEstimate",value:function(t){for(var e=0,r=0;r<t.length;r++){var s=this.getPoint(r);isNaN(s)&&(s=0),e+=Math.abs(Number.parseFloat(t[r])-s)}return e}},{key:"registerNewBestEstimate",value:function(t){this.best={estimate:t,lambda:this.lambda,k:this.k,c:this.c,a:this.a,text:"\u03bb: ".concat(this.lambda,", k: ").concat(this.k,", c: ").concat(this.c,", a: ").concat(this.a)},this._progressSubject.next(this._progress/1134965)}},{key:"getBestPoints",value:function(){this.lambda=this.best.lambda,this.k=this.best.k,this.c=this.best.c,this.a=this.best.a;for(var t=[],e=0;e<365;e++){var r=this.getPoint(e);isNaN(r)&&(r=0),t.push({y:r})}return t}},{key:"getPoint",value:function(t){if(0==this.c)return this.a;var e=this.c*this.k/this.lambda;return 0===e?this.a:0===(e*=Math.pow(t/this.lambda,this.k-1))?this.a:(e*=Math.pow(Math.E,-Math.pow(t/this.lambda,this.k)),e+=this.a,isNaN(e)&&console.log("NaN: x: ".concat(t,", \u03bb: ").concat(this.lambda,", k: ").concat(this.k,", c: ").concat(this.c,", a: ").concat(this.a)),e)}}]),t}(),N=function t(){_classCallCheck(this,t)},A=self;addEventListener("message",(function(t){var e=t.data;return s(void 0,void 0,void 0,regeneratorRuntime.mark((function t(){var r,s,i,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=[new T,new C,new M],s=_createForOfIteratorHelper(r.entries()),t.prev=2,n=regeneratorRuntime.mark((function t(){var s,n,o,a,u;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=_slicedToArray(i.value,2),n=s[0],(o=s[1]).progress.subscribe((function(t){A.postMessage({currentFunction:o.name,progress:100*n/r.length+t/r.length,estimate:o.best.estimate,bestParameters:o.best.text})})),a=o.findBestApprox(e),t.next=5,a;case 5:u=t.sent,A.postMessage({currentFunction:o.name,bestPoints:u,estimate:o.best.estimate,bestParameters:o.best.text});case 7:case"end":return t.stop()}}),t)})),s.s();case 5:if((i=s.n()).done){t.next=9;break}return t.delegateYield(n(),"t0",7);case 7:t.next=5;break;case 9:t.next=14;break;case 11:t.prev=11,t.t1=t.catch(2),s.e(t.t1);case 14:return t.prev=14,s.f(),t.finish(14);case 17:A.postMessage({end:!0});case 18:case"end":return t.stop()}}),t,null,[[2,11,14,17]])})))}))}});